# 크로스핏 커뮤니티 사이트 — 요구사항

## 프로젝트 개요
크로스핏 운동을 하는 사람들을 위한 커뮤니티 웹사이트. WOD 기록, 개인 기록 관리, 커뮤니티 기능을 제공한다.

## 기술 스택
- 프론트엔드: Next.js + TypeScript + Tailwind CSS
- 백엔드: Next.js API Routes
- ORM: Prisma
- DB: PostgreSQL
- 인증: NextAuth.js
- 배포: Docker + Docker Compose + Nginx

## 구현 기능

### 1. 회원 관리
- 이메일 회원가입 / 로그인
- 소셜 로그인 (Google, Kakao)
- 프로필 설정 (닉네임, 소속 박스, 운동 경력, 프로필 사진)
- 등급 시스템 (초급 / 중급 / RX / RX+)

### 2. WOD (Workout of the Day)
- WOD 등록 (관리자)
  - WOD 이름, 설명, 운동 구성, 타입(For Time / AMRAP / EMOM 등)
- WOD 결과 기록
  - 타입별 입력: 시간(For Time), 라운드+렙(AMRAP), 무게(1RM) 등
  - Rx / Scaled 구분
  - 메모 작성
- WOD 랭킹 보드
  - 일별 / 주별 / 월별 필터
  - 성별, 등급별 필터
- WOD 히스토리 (날짜별 아카이브)

### 3. 개인 기록 (PR) 관리
- 주요 리프트 PR 등록 및 수정
  - Back Squat, Front Squat, Deadlift, Clean & Jerk, Snatch, Bench Press, Overhead Press 등
- 벤치마크 WOD 기록
  - Fran, Murph, Grace, Diane, Helen, Jackie 등
- 기록 변화 그래프 (차트)
- 최근 PR 갱신 알림

### 4. 커뮤니티 게시판
- 게시판 카테고리
  - 자유게시판
  - 질문게시판 (동작, 프로그래밍, 장비 등)
  - 운동 인증 (사진/영상 업로드)
  - 정보 공유 (영양, 회복, 모빌리티 등)
- 게시글 CRUD
- 댓글 / 대댓글
- 좋아요
- 이미지 업로드 (최대 5장)
- 게시글 검색

### 5. 관리자 기능
- WOD 등록 / 수정 / 삭제
- 회원 관리 (등급 변경, 차단)
- 게시글 / 댓글 관리 (삭제, 숨김)
- 신고 처리

### 6. 알림 시스템
- 내 게시글에 댓글 달림
- 내 댓글에 대댓글 달림
- PR 갱신 축하
- 관리자 공지
- 알림 읽음/안읽음 처리

### 7. 페이지네이션
- 게시판: 커서 기반 페이지네이션 (무한 스크롤)
- WOD 랭킹: 오프셋 기반 페이지네이션
- 페이지당 기본 20개

### 8. SEO
- Next.js Metadata API로 페이지별 meta 태그 설정
- sitemap.xml, robots.txt 자동 생성
- Open Graph 태그 (커뮤니티 게시글 공유 시 미리보기)

### 9. 에러 처리
- 글로벌 에러 바운더리 (error.tsx)
- API 에러 응답 통일 형식: { success: boolean, data?: any, error?: { code: string, message: string } }
- 404, 500 커스텀 에러 페이지

### 10. 모니터링 (선택)
- Sentry: 프론트엔드 + API 에러 트래킹
- 서버 리소스 모니터링: Docker stats 또는 cAdvisor

## WOD 타입별 정렬 기준
- For Time → 시간 짧을수록 상위
- AMRAP → 라운드+렙 많을수록 상위
- 1RM → 무게 무거울수록 상위

## DB 주요 테이블 구조

User: id, email, password, name, nickname, profileImage, box, experience, level, role, createdAt
WOD: id, title, description, type, movements, date, createdBy, createdAt
WODResult: id, wodId, userId, score, rxOrScaled, memo, createdAt
PR: id, userId, movement, weight, date, memo, createdAt
Post: id, userId, category, title, content, images, views, createdAt
Comment: id, postId, userId, parentId, content, createdAt
Like: id, postId, userId, createdAt
Report: id, targetType, targetId, reporterId, reason, status, createdAt
Notification: id, userId, type, message, isRead, relatedId, createdAt
